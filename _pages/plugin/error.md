---
title: プラグイン導入時のトラブル対処法
keywords: plugin error trouble プラグインエラー プラグイントラブル
tags: [quickstart, getting_started]
permalink: plugin_error
---


---

## どんな時に発生するのか？

- プラグインをインストールした途端エラーが発生し、フロントや管理画面にアクセスできなくなる
- プラグインを有効化する際にエラーが発生し、フロントや管理画面にアクセスできなくなる
- プラグインのインストールや更新や有効化には成功したが、なんだか表示がおかしくなった

このページではこれらの事象の解決策について記載いたします。

### メンテナンスモード下でのインストール

前提として、プラグインをインストールする際はメンテナンスモードにしてから実行すると、キャッシュ関連の問題が起きにくくなります。  
EC-CUBEの管理画面へアクセスし、「コンテンツ管理」の「メンテナンス管理」からメンテナンスモードを有効にした後プラグインのインストールをおこなってください。

## インストールや有効化時にエラー発生、サイトアクセス不可となった場合
  
まずは以下をご確認ください。

- ec-cube.co環境である -> イーシーキューブ社サポートへ[お問い合わせ](https://www.ec-cube.net/product/co/support.php){:target="_blank"}
- サーバーへ入り、コマンド実行などを行うのが困難である -> [よくあるご質問 - モジュールやプラグイン設置後のエラー](https://support.ec-cube.net/hc/ja/articles/360038542232){:target="_blank"}へ
- 上記以外の場合、以降をお読みいただきご確認や実行を行ってみてください。

### 壊れたキャッシュが残ってしまった

もっとも多いエラーの原因として、インストールプロセスの途中終了により壊れたキャッシュが残ってしまうことがあります。
以下の手順でキャッシュをクリアし、再度インストールをお試しください。

[コマンドでキャッシュクリア](#コマンドでキャッシュクリア)  
[ディレクトリのキャッシュを削除](#ディレクトリのキャッシュを削除)

### 管理画面のメニュー追加が行われた際にNavファイルだけ有効化されてしまった
 
管理画面のメニュー追加を行うプラグインの場合、プラグインの有効化時にまれに起こることがあります。  
有効化が正常に終了せず、Navファイル`ec-cube/app/config/eccube/packages/eccube_nav.yaml`のみ有効化されルーティングが有効化されない状態です。  
  
以下の手順を試してみてください。

1. Navファイルをローカルにバックアップします。
1. サーバー上のNavファイルを削除します。
1. 管理画面にログイン出来るようになります。
1. 管理画面より、プラグインを一旦無効化します。
1. ローカルにバックアップしたNavファイルをサーバーの元のディレクトリへ戻します。
1. 管理画面から有効化を行うと再度エラーとなる可能性も有るため、可能であれば[コマンドでのプラグイン有効化](/plugin_install#%E3%81%9D%E3%81%AE%E4%BB%96%E3%81%AE%E6%93%8D%E4%BD%9C){:target="_blank"}をおすすめします。

### プラグインが競合してしまった

プラグインを複数インストールし競合してしまった場合は、プラグイン製作者へ相談しましょう。  
その際、エラーログ・再現方法などの情報を準備しておくとやりとりがスムーズになります。

[よくあるご質問 - ログの取得](https://support.ec-cube.net/hc/ja/search?utf8=%E2%9C%93&query=%E3%83%AD%E3%82%B0){:target="_blank"}

### 上記の対処法でも解決しない場合

その他の対処法や原因・予防対策について、EC-CUBEエバンジェリスト大河内氏の以下の記事にて詳しくご紹介されております。ぜひご参照ください。

- [EC-CUBE4系でプラグインインストール時にエラーが出た時の対処法](https://qiita.com/nanasess/items/583683eb94947aebea44){:target="_blank"}
- [EC-CUBE4系でのプラグインエラーの原因と予防対策](https://qiita.com/nanasess/items/791c9ec98f69ada93ea0){:target="_blank"}

## 有効化したが表示がおかしい場合

以下の事象が想定されます。  
また、表示くずれなどは有効化のみならずプラグインを更新した際にも発生することがあるようです。

- 有効化には成功したが、管理画面に追加したプラグインのメニューや設定アイコンなどが表示されない
- 有効化には成功したが、表示がくずれる、または英語表記や文字化けが起こる

### 有効化したが管理画面のメニューや設定アイコンなどが表示されない

一度プラグインを無効化していただき、再度有効化してみてください。

### 有効化したが表示がくずれる、または英語表記や文字化けが起こる

管理画面よりキャッシュをクリアしてみてください。  

[管理画面でキャッシュクリア](#管理画面でキャッシュクリア)

### 上記の対処法でも解決しない場合

プラグイン製作者へ相談しましょう。

---
---

## 付録：キャッシュをクリアする方法

### 管理画面でキャッシュクリア

管理画面へのログインが可能な場合、  
管理画面の [コンテンツ管理] > [キャッシュ管理] からキャッシュクリアをお試しください。

### コマンドでキャッシュクリア

管理画面へアクセスできない場合は、コマンドラインからキャッシュをクリア&生成する方法をお試しください。  
前提として、コマンドラインの操作のためにターミナルからSSH接続が必要となります。  
ご契約サーバーのSSH接続方法をご確認ください。

SSH接続後、EC-CUBEのディレクトリへ移動します。
```shell
## path/to/eccube_rootの部分にEC-CUBEのディレクトリパスを記載
cd path/to/eccube_root/
```

キャッシュのクリアと生成コマンドを実行
```shell
## Symfony コマンドでのキャッシュクリアと生成
bin/console cache:clear --no-warmup
bin/console cache:warmup
```

※キャッシュクリアコマンドがうまくいかない場合は、強制削除をお試しください。
```shell
## path/to/eccube_root/の部分はEC-CUBEのディレクトリパスを記載
rm -rf path/to/eccube_root/var/cache/*
```

### ディレクトリのキャッシュを削除

コマンドでキャッシュクリアがうまくいかない場合は、ディレクトリのファイルを削除する方法をお試しください。

1. FTP接続する
1. EC-CUBEディレクトリ内の `var/cache/` 以下のディレクトリを削除する
