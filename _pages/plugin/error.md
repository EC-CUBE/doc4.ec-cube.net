---
---
title: プラグインのインストール失敗時の対処法
keywords: plugin error プラグインエラー
tags: [quickstart, getting_started]
permalink: plugin_install

---

## プラグインのインストール時のエラー・失敗対処法

インストール時、有効化/無効化時、アンインストール時に発生するエラーへの対処方法になります。<br>
詳細情報につきましては以下、EC-CUBEエバンジェリスト大河内氏の記事をご参照ください。

- EC-CUBE4系でプラグインインストール時にエラーが出た時の対処法(https://qiita.com/nanasess/items/583683eb94947aebea44){target="_blank"}
- EC-CUBE4系でのプラグインエラーの原因と対処法(https://qiita.com/nanasess/items/791c9ec98f69ada93ea0){target="_blank"}


## エラー時の対処方法

キャッシュ削除/キャッシュ生成など、コマンドラインからの操作の方が安定するので、<br>
ターミナルからSSH接続し、以下のコマンドをお試しください。

1. [メンテナンス画面にして、外部リクエストを遮断](#メンテナンス画面にして、外部リクエストを遮断)
2. [Composer クラスマップの再生成](#Composer クラスマップの再生成)
3. [キャッシュ削除/キャッシュ生成](#キャッシュクリアと再生成)
4. [メンテナンス画面を解除](#メンテナンス画面を解除)


### メンテナンス画面にして、外部リクエストを遮断

.maintenanceファイルを、EC-CUBEをインストールしたディレクトリ直下に置くことで、<br>
メンテナンス画面にすることができます

まずは、ターミナルからSSH接続しEC-CUBEのディレクトリパスを指定する

```shell
## path/to/eccube_rootの部分にEC-CUBEのディレクトリパスを記載
cd path/to/eccube_root/
```

EC-CUBEのディレクトリ直下に移動したら、以下のコマンドで.maintenanceを作成

```shell
## .maintenanceを作成しメンテナンス画面に変更
touch .maintenance
```

メンテナンス画面に変更になっているか、ご確認ください。


### Composer クラスマップの再生成

EC-CUBE4系では、 Composer を利用して、プラグインの依存関係を制御しています。<br>
Composer の クラスマップは自動的に再生成されないため、コマンドラインから生成し直す必要があります。<br>
初回のみ、[Composer コマンド](https://getcomposer.org/download/){target="_blank"} のインストールが必要です。

Composer コマンドのインストールが完了後、クラスマップの再生成を行います。

```shell
## classmap を生成し直す
php composer.phar dumpautoload 
```


### キャッシュ削除/キャッシュ生成
インストールが失敗した際に、キャッシュファイルの不整合が起こっているケースが多いので、<br>
キャッシュ削除し、再生成を行います。

```shell
## キャッシュを削除
bin/console cache:clear --no-warmup
```

```shell
## キャッシュを再生成
bin/console cache:warmup
```

キャッシュ削除/再生成後、もう一度インストールをお試しください。<br>
インストールの際は、安定性の面から [コマンドラインでのインストール](plugin_install) をおすすめします。

### メンテナンス画面を解除
再度インストールを試し、無事インストールできましたら、以下コマンドでメンテナンス画面を解除します。

```shell
## メンテナンス画面を解除
rm .maintenance
```


## エラーが起こる主な要因

プラグインをインストールする際、フレームワークのキャッシュ生成で大量のリソースを消費する為、<br>
Linux系ではサーバーダウンのOS保護機構（OOM Killer）によるプロセスの強制終了が発生してしまう。<br>
上記の点から、性能の高いサーバー（6コア/メモリ8GB 以上あれば比較的安定）や、Linux系以外のFreeBSDなどのOSを採用しているサーバーを利用するなどをご検討ください。



## プラグインの競合について

プラグインを複数インストールした際の競合については<br>
プラグイン製作者へご連絡お願いいたします。<br>
その際には、スムーズなやりとりのためエラーログ・再現方法などの情報をご準備ください。